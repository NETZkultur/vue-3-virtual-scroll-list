var VirtualList=function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=Array(e);r<e;r++)a[r]=t[r];return a}function r(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a,n,o,i,l=[],s=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(a=o.call(r)).done)&&(l.push(a.value),l.length!==e);s=!0);}catch(t){u=!0,n=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw n}}return l}}(t,r)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=t.defineComponent({props:{size:{type:Number,required:!0},remain:{type:Number,required:!0},paddingTop:{type:Number,required:!1},heightDrain:{type:Number,required:!1},windowHeight:{type:Number,required:!1},rtag:{type:String,default:"div"},wtag:{type:String,default:"div"},wclass:{type:String,default:""},wstyle:{type:Object,default:function(){return{}}},start:{type:Number,default:0},offset:{type:Number,default:0},variable:{type:[Function,Boolean],default:!1},bench:{type:Number,default:0},totop:{type:[Function,Boolean],default:!1},tobottom:{type:[Function,Boolean],default:!1},onscroll:{type:[Function,Boolean],default:!1},istable:{type:Boolean,default:!1},item:{type:[Function,Object],default:null},itemcount:{type:Number,default:0},summarizedSizeOfAllItems:{type:Number,default:0},itemprops:{type:Function,default:function(){}},noOverflow:{type:Boolean,default:!1}},methods:{forceRender:function(){var t=this;window.requestAnimationFrame((function(){t.$forceUpdate()}))},setScrollTop:function(t){this.$el.scrollTop=t}},setup:function(e,r){var a=this,n=t.getCurrentInstance(),o=t.ref(null),i="",l=Object.create(null),s=e.start>=e.remain?e.start:0,u=e.remain+(e.bench||e.remain);l.direction="",l.scrollTop=0,l.start=s,l.end=s+u-1,l.keeps=u,l.total=0,l.offsetAll=0,l.paddingTop=0,l.paddingBottom=0,l.varCache={},l.varAverSize=0,l.varLastCalcIndex=0;var d=function(){window.requestAnimationFrame((function(){var t;null==n||null===(t=n.proxy)||void 0===t||t.$forceUpdate()}))},f=t.computed((function(){var t,e;return(null===(t=r.slots)||void 0===t||null===(e=t.default)||void 0===e?void 0:e.call(t)).map((function(t){return t.type.toString().startsWith("Symbol")?t.children:t})).flat()})),c=function(t){var e,r;t=parseInt(t,10),t=Math.max(0,t);var a=l.total-l.keeps,n=t<=l.total&&t>=a||t>l.total;return r=(e=n?Math.max(0,a):t)+l.keeps-1,l.total&&r>l.total&&(r=l.total-1),{end:r,start:e,isLast:n}},p=function(t,r){var a=l.varCache[t];if(!r&&a)return a.size;if("function"==typeof e.variable)return e.variable(t)||0;var n=f.value[t],o=n&&n.props&&n.props.style;if(o&&o.height){var i=o.height.match(/^(.*)px$/);return i&&+i[1]||0}return 0},v=function(t,e){var r=l.varCache[t];if(!e&&r)return r.offset;for(var a=0,n=0;n<t;n++){var o=p(n,e);l.varCache[n]={size:o,offset:a},a+=o}return l.varLastCalcIndex=Math.max(l.varLastCalcIndex,t-1),l.varLastCalcIndex=Math.min(l.varLastCalcIndex,l.total-1),a},m=function(t){o&&((o.$el||o).scrollTop=t)};t.onBeforeUpdate((function(){l.keeps=e.remain+(e.bench||e.remain);var r="start"===i?e.start:l.start,n=c(r);if(i&&["start","size","offset"].includes(i)){var o="offset"===i?e.offset:e.variable?v(n.isLast?l.total:n.start):n.isLast&&l.total-r<=e.remain?l.total*e.size:r*e.size;t.nextTick(m.bind(a,o))}(i||l.end!==n.end||r!==n.start)&&(i="",l.end=n.end,l.start=n.start,d())}));var h=function(){var t,r,a,n=f.value||[];n.length||(l.start=0),l.total=n.length;var o,i=l.total>l.keeps;e.variable?(a=l.total-l.end<=l.keeps||l.varLastCalcIndex===l.total-1?v(l.total):v(l.start)+(l.total-l.end)*(l.varAverSize||e.size),t=i?v(l.start):0,r=i?(o=l.total-1,l.total-l.end<=l.keeps||l.varLastCalcIndex===o?v(o)-v(l.end):(l.total-l.end)*(l.varAverSize||e.size)):0):(a=e.size*l.total,t=e.size*(i?l.start:0),r=e.size*(i?l.total-l.keeps:0)-t),r<e.size&&(r=0),l.paddingTop=t,l.paddingBottom=r,l.offsetAll=a-e.size*e.remain;for(var s=[],u=l.start;u<l.total&&u<=Math.ceil(l.end);u++){var d=n[u];s.push(d)}return s},y=function(t){var r=e.variable?function(t){for(var e=0,r=0,a=0,n=l.total;e<=n;){if(r=e+Math.floor((n-e)/2),a=v(r),l.varAverSize||(l.varAverSize=Math.floor(a/r)),a===t)return r;a<t?e=r+1:a>t&&(n=r-1)}return e>0?--e:0}(t):Math.floor(t/e.size);"U"===l.direction&&(r=r-e.remain+1);var a=c(r),n=e.bench||e.remain,o=1===Math.abs(r-l.start-n);!o&&r-l.start<=n&&!a.isLast&&r>l.start||(o||a.start!==l.start||a.end!==l.end)&&(l.end=a.end,l.start=a.start,d())},b=function(){var t,a;a=(null===(t=o.value)||void 0===t?void 0:t.scrollTop)||0,l.direction=a>l.scrollTop?"D":"U",l.scrollTop=a,l.total>l.keeps?y(a):l.end=l.total-1;var n=l.offsetAll;if(e.onscroll){var i=Object.create(null);i.offset=a,i.offsetAll=n,i.start=l.start,i.end=l.end}r.emit("onScroll",l),!a&&l.total&&r.emit("totop"),a>=n&&r.emit("tobottom")};return function(){var r=h(),a=l.paddingTop,n=l.paddingBottom,i=e.istable,s=i?"div":e.wtag,u=i?"div":e.rtag;i&&(r=[t.h("table",[t.h("tbody",r)])]),void 0!==e.paddingTop&&(a=e.paddingTop);var d=t.h(s,{style:Object.assign({display:"block","padding-top":a+"px","padding-bottom":n+"px"},e.wstyle),class:e.wclass,role:"group"},r),f=0;return void 0!==e.windowHeight?f=e.windowHeight:(f=e.size*e.remain,e.remain>e.itemcount&&(f=e.size*e.itemcount)),void 0!==e.heightDrain&&(f-=e.heightDrain),t.h(u,{ref:o,style:{display:"block","overflow-y":e.noOverflow?"hidden":e.summarizedSizeOfAllItems>=f?"auto":"initial",height:f+"px"},onScroll:b},[d])}}}),n=function(){var t=a;return t.install=function(e){e.component("VirtualList",t)},t}(),o=Object.freeze({__proto__:null,default:n});return Object.entries(o).forEach((function(t){var e=r(t,2),a=e[0],o=e[1];"default"!==a&&(n[a]=o)})),n}(Vue);